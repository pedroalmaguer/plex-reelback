{% extends "base.html" %}

{% block title %}Plex Stats - Home{% endblock %}

{% block content %}
<h1>Welcome to Your Plex Stats</h1>

<!-- User Selection Form -->

<form method="post" action="/set_user">
    <label for="user">Choose a User:</label>
    <select id="user" name="user_id" onchange="this.form.submit()">
        <option value="" disabled selected>Select a user</option>
        {% for user in users %}
        <option value="{{ user.user_id }}">{{ user.friendly_name }}</option>
        {% endfor %}
    </select>
</form>


<!-- Display Current User -->
{% if session.get('user_id') %}
<p>Current User: <strong>{{ session.get('user_id') }}</strong></p>

<!-- Stats Buttons -->
<form method="post" action="/stats_overview">
    <button type="submit" class="button">View Overall Stats</button>
</form>
<form method="post" action="/movies_2024">
    <button type="submit" class="button">View Movies Watched in 2024</button>
</form>
<form method="post" action="/another_stats_route">
    <button type="submit" class="button">View Another Stat</button>
</form>

{% else %}
<p>Please select a user to view stats.</p>
{% endif %}
{% endblock %}
